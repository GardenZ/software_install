# install
$ module load Python  intel-compilers/mkl-14  MUMPS/5.0.1
$ cd kwant-1.3.1
$ vi build.conf
$ cat build.conf 
# Build configuration created by setup.py - feel free to modify.
#
[mumps]
#libraries =  zmumps mumps_common pord metis esmumps scotch scotcherr mpiseq gfortran
libraries =  zmumps mumps_common pord
library_dir = /WORK/app/MUMPS/5.0.1/lib
[lapack]
libraries = mkl_intel_lp64 mkl_sequential mkl_core mkl_def
library_dirs = /opt/intel/composer_xe_2013_sp1.2.144/mkl/lib/intel64/ /WORK/app/MUMPS/5.0.1/lib
extra_link_args = -Wl,-rpath=/opt/intel/composer_xe_2013_sp1.2.144/mkl/lib/intel64/

$ python3 setup.py build
$ python3 setup.py install

# test
python3 -c 'import kwant; kwant.test()'
/WORK/app/Python/3.5.1-icc/lib/python3.5/site-packages/kwant-1.3.1-py3.5-linux-x86_64.egg/kwant/solvers/default.py:18: RuntimeWarning: MUMPS is not available, SciPy built-in solver will be used as a fallback. Performance can be very poor in this case.
  "Performance can be very poor in this case.", RuntimeWarning)
================================ test session starts ================================
platform linux -- Python 3.5.1, pytest-3.1.2, py-1.4.34, pluggy-0.4.0 -- /WORK/app/Python/3.5.1-icc/bin/python3
cachedir: ../../../../../WORK/app/Python/3.5.1-icc/lib/python3.5/site-packages/kwant-1.3.1-py3.5-linux-x86_64.egg/kwant/.cache
rootdir: /WORK/app/Python/3.5.1-icc/lib/python3.5/site-packages/kwant-1.3.1-py3.5-linux-x86_64.egg/kwant, inifile:
collecting ... items
....
-- Docs: http://doc.pytest.org/en/latest/warnings.html
==================== 216 passed, 18 skipped, 7 warnings in 55.78 seconds ====================
